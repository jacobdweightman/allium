# Allium CLI

Allium programs are run through the `allium` executable. Programs can run in
two ways: interpreting directly through `allium`, and by compiling to a
standalone executable file. The compiler still lags behind the interpreter in
terms of feature support, but will ultimately be the "usual" way to develop in
Allium. Thus, `allium` defaults to compilation mode, but can be put into
interpretation mode using the `-i` flag.

| Flag                    | Mode        | Meaning                                      |
| ----------------------- | ----------- | -------------------------------------------- |
| `-i`                    | Interpreter | Puts `allium` into interpreter mode, which runs the input program using the interpreter. |
| `--log-level=X`         | Interpreter | `X` should be 0, 1, 2, or 3. Prints a trace of program execution. Higher values of `X` result in more verbose traces. |
| `-c`                    | Compiler    | "Compile only." Produces an object file, and does not invoke the linker |
| `-o`                    | Compiler    | Specifies the name of the output file. If omitted, the default is `a.out` for an executable, or the name of the first source file with a `.o` extension for an object file. |
| `--print-llvm`          | Compiler    | Prints the LLVM IR produced by the compiler frontend. |
| `--print-syntactic-ast` | Any         | Stops after parsing. Prints a text representation of the un-typed abstract syntax tree, or syntax error diagnostics if there are any. |
| `--print-ast`           | Any         | Stops after semantic analysis. Prints a text representation of the type-checked abstract syntax tree, or syntax error or semantic error diagnostics if there are any. |

This table details the trace messages which are logged for each log level:
| Log Level | Name  | Messages                      |
| --------- | ----- | ----------------------------- |
| 0         | OFF   | None                          |
| 1         | QUIET | OFF + handled effects         |
| 2         | LOUD  | QUIET + attempted predicates  |
| 3         | MAX   | LOUD + attempted implications |

## Examples

Common usages for developers using Allium:
```
# Produces an execuable called `a.out`
$ allium MyProgram.allium

# Produces an object file called MyProgram.o
$ allium MyProgram.allium -c

# Executes the program with the interpreter
$ allium -i MyProgram.allium

# Executes the program with the interpreter and logs a detailed execution trace.
# This is helpful for debugging Allium programs.
$ allium -i MyProgram.allium --log-level=3
```

Common usages for developers working on Allium:
```
# Prints the un-typed syntax tree. Useful for debugging the parser.
$ allium MyProgram.allium --print-syntactic-ast

# Prints the typed syntax tree. Useful for debugging SemAna.
$ allium MyProgram.allium --print-ast

# Prints the LLVM IR generated by the frontend, before lowering. Useful for
# debugging LLVM code generation.
$ allium MyProgram.allium --print-llvm

# Executes the program with the interpreter and logs a detailed execution trace.
# This is helpful for debugging test programs and the interpreter.
$ allium -i MyProgram.allium --log-level=3
```
